import{_ as R,c as F,a,b as u,w as H,r as f,o as x,h as p}from"./index-NtG16lXS.js";const r={origin:"https://api.emailjs.com",blockHeadless:!1},_=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},E=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=_(e);r.publicKey=s.publicKey,r.blockHeadless=s.blockHeadless,r.blockList=s.blockList,r.limitRate=s.limitRate,r.origin=s.origin||t};class h{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const y=async(e,t,s={})=>{const o=await fetch(r.origin+e,{method:"POST",headers:s,body:t}),i=await o.text(),l=new h(o.status,i);if(o.ok)return l;throw l},w=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},S=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},k=e=>e.webdriver||!e.languages||e.languages.length===0,v=()=>new h(451,"Unavailable For Headless Browser"),B=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},P=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},q=(e,t)=>e instanceof FormData?e.get(t):e[t],V=(e,t)=>{if(P(e))return!1;B(e.list,e.watchVariable);const s=q(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},j=()=>new h(403,"Forbidden"),K=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a string"},M=(e,t,s)=>{const o=Number(s.getItem(e)||0);return t-Date.now()+o},g=(e,t,s)=>{setTimeout(()=>{s.removeItem(e)},t)},L=(e,t,s)=>{if(!s.throttle)return!1;K(s.throttle,s.id);const o=s.id||t,i=M(o,s.throttle,e);return i>0?(g(o,i,e),!0):(e.setItem(o,Date.now().toString()),g(o,s.throttle,e),!1)},T=()=>new h(429,"Too Many Requests"),O=(e,t,s,o)=>{const i=_(o),l=i.publicKey||r.publicKey,c=i.blockHeadless||r.blockHeadless,m={...r.blockList,...i.blockList},b={...r.limitRate,...i.limitRate};return c&&k(navigator)?Promise.reject(v()):(w(l,e,t),S(s),s&&V(m,s)?Promise.reject(j()):L(localStorage,location.pathname,b)?Promise.reject(T()):y("/api/v1.0/email/send",JSON.stringify({lib_version:"4.1.0",user_id:l,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},N=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},U=e=>typeof e=="string"?document.querySelector(e):e,C=(e,t,s,o)=>{const i=_(o),l=i.publicKey||r.publicKey,c=i.blockHeadless||r.blockHeadless,m={...r.blockList,...i.blockList},b={...r.limitRate,...i.limitRate};if(c&&k(navigator))return Promise.reject(v());const d=U(s);w(l,e,t),N(d);const n=new FormData(d);return V(m,n)?Promise.reject(j()):L(localStorage,location.pathname,b)?Promise.reject(T()):(n.append("lib_version","4.1.0"),n.append("service_id",e),n.append("template_id",t),n.append("user_id",l),y("/api/v1.0/email/send-form",n))},D={init:E,send:O,sendForm:C},J={data(){return{issue:{name:"",email:"",content:""}}},methods:{sendEmail(){try{D.send("service_wrg9fdg","template_u74y2ir",this.issue,"cU7MJETmO9Fcn--g1").then(()=>{alert("問題回報完成!"),this.issue={name:"",email:"",content:""}})}catch(e){console.log({error:e})}}}},A={class:"container flex-fill py-4 py-lg-5"},z={class:"row justify-content-center"},I={class:"col-lg-6"},G={class:"w-100"},Q=a("h1",{class:"h2 mb-3 text-center"},"問題回報",-1),W={class:"form-floating mb-4"},X=a("label",{for:"name"},"請輸入姓名",-1),Y={class:"form-floating mb-4"},Z=a("label",{for:"email"},"請輸入電子信箱",-1),$={class:"form-floating mb-4"},ee=a("label",{for:"content"},"請輸入問題內容",-1),te=a("button",{type:"submit",class:"btn btn-brand-blue btn-lg rounded-pill mb-4"},"送出",-1);function se(e,t,s,o,i,l){const c=f("VField"),m=f("ErrorMessage"),b=f("VForm");return x(),F("div",A,[a("div",z,[a("div",I,[a("div",G,[u(b,{ref:"form",class:"card rounded-4 p-4 p-lg-5",onSubmit:l.sendEmail},{default:H(({errors:d})=>[Q,a("div",W,[u(c,{type:"text",id:"name",placeholder:"請輸入姓名",name:"姓名",class:p(["form-control",{"is-invalid":d.姓名}]),rules:"required",modelValue:i.issue.name,"onUpdate:modelValue":t[0]||(t[0]=n=>i.issue.name=n)},null,8,["class","modelValue"]),u(m,{name:"姓名",class:"invalid-feedback"}),X]),a("div",Y,[u(c,{type:"email",id:"email",placeholder:"請輸入電子信箱",name:"信箱",class:p(["form-control",{"is-invalid":d.信箱}]),rules:"email|required",modelValue:i.issue.email,"onUpdate:modelValue":t[1]||(t[1]=n=>i.issue.email=n)},null,8,["class","modelValue"]),u(m,{name:"信箱",class:"invalid-feedback"}),Z]),a("div",$,[u(c,{as:"textarea",id:"content",style:{height:"200px"},placeholder:"請輸入問題內容",name:"問題內容",class:p(["form-control",{"is-invalid":d.問題內容}]),rules:"required",modelValue:i.issue.content,"onUpdate:modelValue":t[2]||(t[2]=n=>i.issue.content=n)},null,8,["class","modelValue"]),u(m,{name:"問題內容",class:"invalid-feedback"}),ee]),te]),_:1},8,["onSubmit"])])])])])}const oe=R(J,[["render",se]]);export{oe as default};
