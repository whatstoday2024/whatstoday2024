import{_ as v,j as u,m as V,c as p,b as t,a as e,w as y,F as w,k,f as x,r as i,o as _,i as C,h}from"./index-Bjo8ejMc.js";document.title="馬上登入";const M={data(){return{user:{email:"",password:""},loginError:!1,isLoading:!1}},methods:{login(){this.isLoading=!0,this.axios.post("https://whatstoday2024-8nsu.onrender.com/login",this.user).then(r=>{const{accessToken:s,user:l}=r.data;this.$cookie.setMemberToken(s),this.$cookie.setMemberId(l.id),this.setMemberData(l),this.isLoading=!1;const a=1e3;l.isAdmin?(u.success("登入成功！前往後台",{autoClose:a}),setTimeout(()=>{this.$router.push({name:"AdminDashboard"})},a)):(u.success("登入成功！前往菜單",{autoClose:a}),setTimeout(()=>{this.$router.push({name:"MenuView"})},a))}).catch(()=>{this.loginError=!0,this.isLoading=!1})},...V(k,["setMemberData"])}},E={class:"container flex-fill py-4 py-lg-5 d-flex align-items-center"},F={class:"w-100"},L={class:"row g-3 g-lg-4 justify-content-evenly"},T=e("div",{class:"col-lg-5 align-self-lg-center"},[e("div",{class:"text-center text-lg-end opacity-75"},[e("h2",{class:"display-6"},[x(" 健康、美味、驚喜 "),e("span",{class:"d-block mt-3"},"一鍵獲得")])])],-1),D={class:"col-lg-6"},N=e("h1",{class:"h2 mb-4 text-center"},"登入會員",-1),$={key:0,class:"alert alert-danger mb-4"},A={class:"form-floating mb-4"},B=e("label",{for:"email"},"請輸入電子信箱",-1),j={class:"form-floating mb-4"},q=e("label",{for:"password"},"請輸入密碼",-1),S={class:"d-flex"},U=e("button",{type:"submit",class:"btn btn-primary btn-lg rounded-pill w-50 ms-2"},"登入",-1);function z(r,s,l,a,o,g){const b=i("loadingVue"),d=i("VField"),c=i("ErrorMessage"),f=i("VForm");return _(),p(w,null,[t(b,{active:o.isLoading},null,8,["active"]),e("div",E,[e("div",F,[e("div",L,[T,e("div",D,[t(f,{class:"card border-primary rounded-4 p-4 p-lg-5",onSubmit:g.login},{default:y(({errors:m})=>[N,o.loginError?(_(),p("div",$," 登入失敗！請確認帳號與密碼是否正確。 ")):C("",!0),e("div",A,[t(d,{type:"email",id:"email",placeholder:"請輸入電子信箱",name:"信箱",class:h(["form-control",{"is-invalid":m.信箱}]),rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":s[0]||(s[0]=n=>o.user.email=n)},null,8,["class","modelValue"]),t(c,{name:"信箱",class:"invalid-feedback"}),B]),e("div",j,[t(d,{type:"password",id:"password",placeholder:"請輸入密碼",name:"密碼",class:h(["form-control",{"is-invalid":m.密碼}]),rules:"required",modelValue:o.user.password,"onUpdate:modelValue":s[1]||(s[1]=n=>o.user.password=n)},null,8,["class","modelValue"]),t(c,{name:"密碼",class:"invalid-feedback"}),q]),e("div",S,[e("button",{type:"button",class:"btn btn-outline-primary btn-lg rounded-pill w-50 me-2",onClick:s[2]||(s[2]=n=>r.$router.push({name:"Register"}))},"還不是會員？前往註冊"),U])]),_:1},8,["onSubmit"])])])])])],64)}const R=v(M,[["render",z]]);export{R as default};
