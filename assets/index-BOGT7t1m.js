import{_ as H,c as x,a,b as c,w as y,r as h,o as E,h as p}from"./index-BPoPsjoA.js";const n={origin:"https://api.emailjs.com",blockHeadless:!1},g=e=>e?typeof e=="string"?{publicKey:e}:e.toString()==="[object Object]"?e:{}:{},S=(e,t="https://api.emailjs.com")=>{if(!e)return;const s=g(e);n.publicKey=s.publicKey,n.blockHeadless=s.blockHeadless,n.blockList=s.blockList,n.limitRate=s.limitRate,n.origin=s.origin||t};class _{constructor(t=0,s="Network Error"){this.status=t,this.text=s}}const w=async(e,t,s={})=>{const o=await fetch(n.origin+e,{method:"POST",headers:s,body:t}),i=await o.text(),l=new _(o.status,i);if(o.ok)return l;throw l},k=(e,t,s)=>{if(!e||typeof e!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!t||typeof t!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!s||typeof s!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},q=e=>{if(e&&e.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},V=e=>e.webdriver||!e.languages||e.languages.length===0,j=()=>new _(451,"Unavailable For Headless Browser"),B=(e,t)=>{if(!Array.isArray(e))throw"The BlockList list has to be an array";if(typeof t!="string")throw"The BlockList watchVariable has to be a string"},P=e=>{var t;return!((t=e.list)!=null&&t.length)||!e.watchVariable},K=(e,t)=>e instanceof FormData?e.get(t):e[t],L=(e,t)=>{if(P(e))return!1;B(e.list,e.watchVariable);const s=K(t,e.watchVariable);return typeof s!="string"?!1:e.list.includes(s)},T=()=>new _(403,"Forbidden"),M=(e,t)=>{if(typeof e!="number"||e<0)throw"The LimitRate throttle has to be a positive number";if(t&&typeof t!="string")throw"The LimitRate ID has to be a string"},O=(e,t,s)=>{const o=Number(s.getItem(e)||0);return t-Date.now()+o},v=(e,t,s)=>{setTimeout(()=>{s.removeItem(e)},t)},R=(e,t,s)=>{if(!s.throttle)return!1;M(s.throttle,s.id);const o=s.id||t,i=O(o,s.throttle,e);return i>0?(v(o,i,e),!0):(e.setItem(o,Date.now().toString()),v(o,s.throttle,e),!1)},F=()=>new _(429,"Too Many Requests"),N=(e,t,s,o)=>{const i=g(o),l=i.publicKey||n.publicKey,b=i.blockHeadless||n.blockHeadless,d={...n.blockList,...i.blockList},m={...n.limitRate,...i.limitRate};return b&&V(navigator)?Promise.reject(j()):(k(l,e,t),q(s),s&&L(d,s)?Promise.reject(T()):R(localStorage,location.pathname,m)?Promise.reject(F()):w("/api/v1.0/email/send",JSON.stringify({lib_version:"4.1.0",user_id:l,service_id:e,template_id:t,template_params:s}),{"Content-type":"application/json"}))},U=e=>{if(!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},C=e=>typeof e=="string"?document.querySelector(e):e,D=(e,t,s,o)=>{const i=g(o),l=i.publicKey||n.publicKey,b=i.blockHeadless||n.blockHeadless,d={...n.blockList,...i.blockList},m={...n.limitRate,...i.limitRate};if(b&&V(navigator))return Promise.reject(j());const f=C(s);k(l,e,t),U(f);const r=new FormData(f);return L(d,r)?Promise.reject(T()):R(localStorage,location.pathname,m)?Promise.reject(F()):(r.append("lib_version","4.1.0"),r.append("service_id",e),r.append("template_id",t),r.append("user_id",l),w("/api/v1.0/email/send-form",r))},J={init:S,send:N,sendForm:D},A={data(){return{issue:{type:"問題回報",name:"",email:"",content:""}}},methods:{sendEmail(){try{J.send("service_wrg9fdg","template_u74y2ir",this.issue,"cU7MJETmO9Fcn--g1").then(()=>{alert("問題回報完成!"),this.issue={type:"問題回報",name:"",email:"",content:""}})}catch(e){console.log({error:e})}}}},z={class:"container flex-fill py-4 py-lg-5"},I={class:"row justify-content-center"},G={class:"col-lg-6"},Q={class:"w-100"},W=a("h1",{class:"h2 mb-3 text-center"},"問題回報/菜色許願",-1),X={class:"form-floating mb-4"},Y=a("option",{value:"問題回報"},"問題回報",-1),Z=a("option",{value:"菜色許願"},"菜色許願",-1),$=a("label",{for:"name"},"請選擇問題類型",-1),ee={class:"form-floating mb-4"},te=a("label",{for:"name"},"請輸入姓名",-1),se={class:"form-floating mb-4"},ie=a("label",{for:"email"},"請輸入電子信箱",-1),oe={class:"form-floating mb-4"},ae=a("label",{for:"content"},"請輸入問題內容",-1),ne=a("button",{type:"submit",class:"btn btn-brand-blue btn-lg rounded-pill mb-4"},"送出",-1);function re(e,t,s,o,i,l){const b=h("Field"),d=h("ErrorMessage"),m=h("VField"),f=h("VForm");return E(),x("div",z,[a("div",I,[a("div",G,[a("div",Q,[c(f,{ref:"form",class:"card rounded-4 p-4 p-lg-5",onSubmit:l.sendEmail},{default:y(({errors:r})=>[W,a("div",X,[c(b,{id:"type",name:"問題類型",as:"select",class:p(["form-select",{"is-invalid":r.問題類型}]),"aria-label":"請選擇問題類型",rules:"required",modelValue:i.issue.type,"onUpdate:modelValue":t[0]||(t[0]=u=>i.issue.type=u)},{default:y(()=>[Y,Z]),_:2},1032,["class","modelValue"]),c(d,{name:"問題類型",class:"invalid-feedback"}),$]),a("div",ee,[c(m,{type:"text",id:"name",placeholder:"請輸入姓名",name:"姓名",class:p(["form-control",{"is-invalid":r.姓名}]),rules:"required",modelValue:i.issue.name,"onUpdate:modelValue":t[1]||(t[1]=u=>i.issue.name=u)},null,8,["class","modelValue"]),c(d,{name:"姓名",class:"invalid-feedback"}),te]),a("div",se,[c(m,{type:"email",id:"email",placeholder:"請輸入電子信箱",name:"信箱",class:p(["form-control",{"is-invalid":r.信箱}]),rules:"email|required",modelValue:i.issue.email,"onUpdate:modelValue":t[2]||(t[2]=u=>i.issue.email=u)},null,8,["class","modelValue"]),c(d,{name:"信箱",class:"invalid-feedback"}),ie]),a("div",oe,[c(m,{as:"textarea",id:"content",style:{height:"200px"},placeholder:"請輸入問題內容",name:"問題內容",class:p(["form-control",{"is-invalid":r.問題內容}]),rules:"required",modelValue:i.issue.content,"onUpdate:modelValue":t[3]||(t[3]=u=>i.issue.content=u)},null,8,["class","modelValue"]),c(d,{name:"問題內容",class:"invalid-feedback"}),ae]),ne]),_:1},8,["onSubmit"])])])])])}const ce=H(A,[["render",re]]);export{ce as default};
