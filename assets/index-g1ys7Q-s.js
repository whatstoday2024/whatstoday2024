import{m as f}from"./memberData-XvPPmMJU.js";import{_ as b,m as v,c as m,d as t,b as e,w as y,F as V,h as w,e as a,o as u,j as x,i as p}from"./index-dltQLadg.js";const k={data(){return{user:{email:"",password:""},loginError:!1,isLoading:!1}},methods:{login(){this.isLoading=!0,this.axios.post("https://whatstoday2024.onrender.com/login",this.user).then(n=>{const{accessToken:s,user:i}=n.data;document.cookie=`whatstoday=${s}`,document.cookie=`whatstodayMember=${i.id}`,this.setMemberData(i),this.isLoading=!1,alert("登入成功！前往個人頁"),this.$router.push({name:"Profile"})}).catch(()=>{this.loginError=!0,this.isLoading=!1})},...v(f,["setMemberData"])}},E={class:"container flex-fill py-4 py-lg-5 d-flex align-items-center"},F={class:"w-100"},C={class:"row g-3 g-lg-4 justify-content-evenly"},L=e("div",{class:"col-lg-5 align-self-lg-center"},[e("div",{class:"text-center text-lg-end opacity-75"},[e("h2",{class:"display-6"},[w(" 健康、美味、驚喜 "),e("span",{class:"d-block mt-3"},"一鍵獲得")])])],-1),M={class:"col-lg-6"},N=e("h1",{class:"h2 mb-3 text-center"},"登入會員",-1),B={class:"text-center"},S={key:0,class:"alert alert-danger mb-4"},$={class:"form-floating mb-4"},j=e("label",{for:"email"},"請輸入電子信箱",-1),q={class:"form-floating mb-4"},D=e("label",{for:"password"},"請輸入密碼",-1),T=e("button",{type:"submit",class:"btn btn-primary btn-lg rounded-pill"},"登入",-1);function U(n,s,i,z,o,_){const g=a("loadingVue"),r=a("VField"),d=a("ErrorMessage"),h=a("VForm");return u(),m(V,null,[t(g,{active:o.isLoading},null,8,["active"]),e("div",E,[e("div",F,[e("div",C,[L,e("div",M,[t(h,{class:"card rounded-4 p-4 p-lg-5",onSubmit:_.login},{default:y(({errors:c})=>[N,e("div",B,[e("button",{type:"button",class:"btn btn-outline-primary mb-4 rounded-pill",onClick:s[0]||(s[0]=l=>n.$router.push({name:"Register"}))},"還不是會員？前往註冊")]),o.loginError?(u(),m("div",S," 登入失敗！請確認帳號與密碼是否正確。 ")):x("",!0),e("div",$,[t(r,{type:"email",id:"email",placeholder:"請輸入電子信箱",name:"信箱",class:p(["form-control",{"is-invalid":c.信箱}]),rules:"email|required",modelValue:o.user.email,"onUpdate:modelValue":s[1]||(s[1]=l=>o.user.email=l)},null,8,["class","modelValue"]),t(d,{name:"信箱",class:"invalid-feedback"}),j]),e("div",q,[t(r,{type:"password",id:"password",placeholder:"請輸入密碼",name:"密碼",class:p(["form-control",{"is-invalid":c.密碼}]),rules:"required",modelValue:o.user.password,"onUpdate:modelValue":s[2]||(s[2]=l=>o.user.password=l)},null,8,["class","modelValue"]),t(d,{name:"密碼",class:"invalid-feedback"}),D]),T]),_:1},8,["onSubmit"])])])])])],64)}const R=b(k,[["render",U]]);export{R as default};
